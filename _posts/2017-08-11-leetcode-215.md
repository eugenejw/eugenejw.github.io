---
layout: post
comments: true
date: 2017-09-25 19:41:00
title: Kth Largest Element in an Array (leetcode 215)
category: Coding
tags: [Algorithm, Quick Sort, Leetcode, Medium, Java]
---

**Description**
Find the kth largest element in an unsorted array. Note that it is the kth largest element in the sorted order, not the kth distinct element.

For example,
```java
Given [3,2,1,5,6,4] and k = 2, return 5.
```

Note: 
You may assume k is always valid, 1 ? k ? array's length.


## O(n) solution using partition method in quick sort algorithm
The smart approach for this problem is to use the selection algorithm (based on the partion method - the same one as used in quicksort).
Like the quick sort, to avoid the O(n^2) worst case scenario, we need to randomize the list to guarantee the O(n) time complexity.

Alternative, but less interesting solution is to use a k size Priority Queue, which cost O(nlogn) timeComplexity.

```java
public class Solution {
    public int findKthLargest(int[] nums, int k) {
        // Collections.shuffle(List<?>);
        randomizeList(nums);
        int n = nums.length;
        int lo = 0, hi = n-1, pivot = 0;
        // int pivot = partition(nums, 0, n-1);
        while (lo < hi) {
            pivot = partition(nums, lo, hi);
            // System.out.println(pivot);
            if (pivot < n-k) {
                lo = pivot + 1;
            }
            else if (pivot > n-k) {
                hi = pivot - 1;
            }
            else {
                break;
            }
        }

        return nums[n-k];
    }
    
    private void randomizeList(int[] nums) {
        Random rnd = new Random();
        for (int i=nums.length; i>1; i--) {
            swap(nums, i-1, rnd.nextInt(i));
        }
    }
    
    private int partition(int[] nums, int low, int high) {
        int i=low-1, pivot=nums[high];
        for (int j=low; j<high; j++) {
            if (nums[j] <= pivot) {
                i++;
                swap(nums, i, j);
            }
        }
        swap(nums, i+1, high);
        // System.out.println(i+1);
        return i+1;
    }
    
    private void swap(int[] nums, int i, int j) {
        int temp = nums[i];
        nums[i] = nums[j];
        nums[j] = temp;
    }
}
```

![img]({{ site.baseurl | prepend:site.url}}/images/215_java.jpg){: .center-image }*Runtime: 28ms*
